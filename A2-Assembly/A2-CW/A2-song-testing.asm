setfreq m8
#DEFINE LOWFREQ 0X80
#DEFINE Cn 0X95;6       ; 519Hz 91
#DEFINE En 0X9C         ; 692Hz A0
#DEFINE Fn 0XA0;BE      ; 777Hz AB
#DEFINE Gn 0XA5         ; 824Hz AD
#DEFINE An 0XA8         ; 925Hz B8
#DEFINE Bn 0XAD         ; 1038Hz C4
#DEFINE C5n 0XB6;B6     ; C5

let dirsc = %00001000   ; let pin4 on portc become output
				; for note rests
INIT:
	MOVW  0X00
	MOVWR PORTC
	JMP START ; skip the functions

SIXTEEN: ; 375
	CALL wait100ms
	CALL wait100ms
	CALL wait100ms
	CALL wait100ms
	CALL wait10ms
	CALL wait10ms
	CALL wait10ms
	CALL wait10ms
RET
EIGHT: ;500
	call wait100ms
	call wait100ms
	call wait100ms
	call wait100ms
	call wait100ms
	CALL wait100ms
RET
EIGHTDOT: ;750
	call wait100ms
	call wait100ms
	call wait100ms
	call wait100ms
	CALL wait100ms
	call wait100ms
	call wait100ms
	call wait100ms
	call wait10ms
	call wait10ms
	call wait10ms
	call wait10ms
	call wait10ms
RET
FOUR: ;1500 
	call wait1000ms
	CALL wait100ms
RET

; DEFINE NOTE VALUES
CNOTE:
	MOVW   Cn
	MOVWR  PORTB
RET
EbNOTE:
	MOVW   En
	MOVWR  PORTB
RET
FNOTE:
	MOVW   Fn
	MOVWR  PORTB
RET
GNOTE:
	MOVW   Gn
	MOVWR  PORTB
RET
AbNOTE:
	MOVW   An
	MOVWR  PORTB
RET
BbNOTE:
	MOVW   Bn
	MOVWR  PORTB
RET
C5NOTE:
	MOVW   C5n
	MOVWR  PORTB
RET
BREAK:
	MOVW LOWFREQ
	MOVWR PORTB
	CALL WAIT100MS
RET
REST:
	MOVW 0X08
	MOVWR PORTC
	CALL WAIT1000MS
	MOVW 0X00
	MOVWR PORTC
RET

; syntax
; CALL NOTE
; CALL LENGTH
; CALL BREAK/ REST (op)
START: ; Get in the fucking IC Shinji
	CALL CNOTE
	CALL FOUR

	CALL EbNOTE
	CALL FOUR

	CALL FNOTE
	CALL EIGHTDOT

	CALL EbNOTE
	CALL EIGHT ;SIXTEEN ;CALL BREAK

	CALL EbNOTE
	CALL EIGHT

	CALL FNOTE
	CALL EIGHT
	CALL BREAK ; EOF BAR 1

	CALL FNOTE
	CALL EIGHT ; JOINED
	CALL BREAK ; CONT NOTE

	CALL FNOTE
	CALL EIGHT
	CALL BREAK 

	CALL BbNOTE
	CALL EIGHT

	CALL AbNOTE
	CALL EIGHT

	CALL GNOTE
	CALL SIXTEEN

	CALL FNOTE
	CALL EIGHT

	CALL GNOTE
	CALL SIXTEEN

	CALL GNOTE
	CALL FOUR
	CALL BREAK
	CALL REST ; EOF BAR 2

	CALL GNOTE
	CALL FOUR

	CALL BbNOTE
	CALL FOUR

	CALL C5NOTE
	CALL EIGHTDOT

	CALL FNOTE
	CALL SIXTEEN

	CALL FNOTE
	CALL EIGHT

	CALL EbNOTE
	CALL EIGHT
	CALL BREAK ; EOF BAR 3

	CALL BbNOTE
	CALL EIGHT
	CALL BREAK ; JOINED

	CALL BbNOTE
	CALL EIGHT
	CALL BREAK ; JOINED

	CALL GNOTE
	CALL EIGHT

	CALL BbNOTE
	CALL EIGHT
	
	CALL BbNOTE
	CALL EIGHTDOT

	CALL C5NOTE
	CALL FOUR	

	CALL C5NOTE
	CALL FOUR
	CALL FOUR
	MOVW 0XFF
	MOVWR PORTC
	CALL WAIT1000MS
	CALL WAIT1000MS
	CALL WAIT1000MS
	CALL WAIT1000MS
	CALL BREAK
JMP INIT ; RESTART
